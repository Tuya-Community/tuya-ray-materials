import { encodeUseMapV1, decodeUseMapV1 } from './cmd_2e_2f';

describe('encodeUseMapV1', () => {
  test('basic usage', () => {
    expect(
      encodeUseMapV1({
        mapId: 0,
        url: 'https://ty-storage-permanent-1254153901.cos.tuyacn.com/131168-56564008-db4635520be63dc2/common/1703063414-init.bin?Expires=1704185430&OSSAccessKeyId=AKID6Yv3ku5TrZMdPIG8cSOX-7EPkKZmV4ck67F_rcb3dWvqQaYj8KFC-vDVjhT0bdJ9&Signature=0jyG4MXoUurBVNwSR8sUmWJwYK0%3D&security-token=cmuiiIsuQz5uv4lZ1SwkEUzRcBYEf7ma4fbf649d36e9f4b48349f9a48cb0f584ZhvG5EBl4bWDfDAJlRQo1fkR2QmMOy_zD552LEZqnvg5W8sppTwfritsXQWzGU08nZ-ifVUEdHxHzwU6Wj_MgxQst2pcvGirUdehxPvvfUvFFAy3rr11ThymhCMWC_XF3oktGrdiGyKD5RPSxVoqOxhRhCsm40M4b1aiT44jKFVum_qf1Xp0STJSGcmRVXKDLvaPDQMmWPqCpu9kt09sjhM-ov058b0jHeMckiTgOLGPAhB3LqGwBb4-TOOox3xRYOMzbRSdJiP6UHLkAns4L7v6XMR-ADnvIX1G1alsvsW8J96-KE5Kj6bor0UsWuNurhDApAhHOYwYA6FxLw6v5MKB4p8TDIXJqZg6G44vJ37uRHs3y3O7gqf1ddDP7kH8Qpp44ZMLdbZ96wpioZt9xg',
      })
    ).toBe(
      'ab00000002f12e00000000000002e868747470733a2f2f74792d73746f726167652d7065726d616e656e742d313235343135333930312e636f732e74757961636e2e636f6d2f3133313136382d35363536343030382d646234363335353230626536336463322f636f6d6d6f6e2f313730333036333431342d696e69742e62696e3f457870697265733d31373034313835343330264f53534163636573734b657949643d414b4944365976336b753554725a4d645049473863534f582d3745506b4b5a6d5634636b3637465f72636233645776715161596a384b46432d7644566a68543062644a39265369676e61747572653d306a7947344d586f55757242564e7753523873556d574a77594b302533442673656375726974792d746f6b656e3d636d756969497375517a357576346c5a3153776b45557a526342594566376d6134666266363439643336653966346234383334396639613438636230663538345a6876473545426c346257446644414a6c52516f31666b5232516d4d4f795f7a443535324c455a716e7667355738737070547766726974735851577a475530386e5a2d6966565545644878487a775536576a5f4d67785173743270637647697255646568785076766655764646417933727231315468796d68434d57435f5846336f6b744772646947794b443552505378566f714f7868526843736d34304d34623161695434346a4b4656756d5f71663158703053544a5347636d5256584b444c76615044514d6d575071437075396b743039736a684d2d6f7630353862306a48654d636b6954674f4c4750416842334c7147774262342d544f4f6f78337852594f4d7a625253644a69503655484c6b416e73344c377636584d522d41446e764958314731616c73767357384a39362d4b45354b6a36626f7230557357754e7572684441704168484f597759413646784c773676354d4b42347038544449584a715a6736473434764a3337755248733379334f376771663164644450376b483851707034345a4d4c64625a39367770696f5a74397867ea'
    );
  });
});

describe('decodeUseMapV1', () => {
  test('if use map fail', () => {
    expect(
      decodeUseMapV1({
        command: 'ab00000000022f002f',
      })
    ).toEqual({
      ret: 0,
      success: false,
    });
  });

  test('if use map success', () => {
    expect(
      decodeUseMapV1({
        command: 'ab00000000022f0130',
      })
    ).toEqual({
      ret: 1,
      success: true,
    });
  });
});
